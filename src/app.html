<!DOCTYPE html>
<html lang="en" ng-app="proton" class="protonmail">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="/">
    <title>ProtonMail</title>
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon_57.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="assets/favicon_57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon_72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon_114.png">
    <link rel="apple-touch-icon" sizes="128x128" href="assets/favicon_128.png">
    <link rel="apple-touch-icon" sizes="195x195" href="assets/favicon_195.png">
    <meta name="application-name" content="ProtonMail">
    <meta name="msapplication-TileImage" content="assets/favicon_128.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">

    <script type="text/javascript">
    function is_good_prng_available() {
        if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {
            return true;
        } else if (typeof window !== 'undefined' && typeof window.msCrypto === 'object' && typeof window.msCrypto.getRandomValues === 'function') {
            return true;
        } else {
            return false;
        }
    }
    function isSessionStorage_available() {
        return (typeof(sessionStorage) !== 'undefined');
    }

    if(!isSessionStorage_available()) {
        alert('Error: sessionStorage is required to use ProtonMail.');
        setTimeout( function() {
            window.location = 'https://protonmail.com/support/knowledge-base/sessionstorage/';
        }, 1000);
    }
    if (!is_good_prng_available()) {
        alert('Error: a PRNG is required to use ProtonMail.');
        setTimeout( function() {
            window.location = 'https://protonmail.com/support/knowledge-base/prng/';
        }, 1000);
    }

    </script>

    <% styles.forEach(function (file) { %>
        <link rel="stylesheet" type="text/css" href="/<%= file %>" />
    <% }); %>
    <ng-include src="'templates/partials/custom-theme.tpl.html'"></ng-include>
</head>
<body
class=""
ontouchstart
id="{{ toState }}"
ng-class="{
    locked: (isLoggedIn && isLocked) || ('login'|isState) || ('login.unlock'|isState) || ('eo.unlock'|isState) || ('eo.message'|isState) || ('reset'|isState) || ('eo.reply'|isState),
    login:!isLoggedIn,
    unlock:isLocked,
    secure:isSecure,
    blank:!!isBlank,
    rows: (layoutMode==='rows'),
    columns: (layoutMode==='columns'),
    activeComposer:activeComposer,
    maximizedComposer:maximizedComposer,
    light: (('support.reset-password'|isState) || ('step1'|isState) || ('pre-invite'|isState)),
    scroll: ('step1'|isState)
}">

<div id="pm_background" ng-class="{ 'tablet': showSidebar }" ng-click="showSidebar = false"></div>

<div id="loading">
    <noscript style="padding: 2rem; display:block; text-align: center;">ProtonMail requires Javascript. Enable Javascript and reload this page to continue.</noscript>
</div>

<div id="pm_loading" ng-class="{ 'show': networkActivity.loading() || loggingOut }">
    <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</div>

<div ui-view="main" autoscroll="false" id="body"></div>
<% scripts.forEach(function (file) { %>
    <script type="text/javascript" src="/<%= file %>"></script>
<% }); %>

</body>
</html>
