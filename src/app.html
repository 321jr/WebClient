<!DOCTYPE html>
<html lang="en" ng-app="proton" class="protonmail">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <base href="/">
    <title>ProtonMail</title>
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon_57.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="assets/favicon_57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon_72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon_114.png">
    <link rel="apple-touch-icon" sizes="128x128" href="assets/favicon_128.png">
    <link rel="apple-touch-icon" sizes="195x195" href="assets/favicon_195.png">
    <meta name="application-name" content="ProtonMail">
    <meta name="msapplication-TileImage" content="assets/favicon_128.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">

    <% styles.forEach(function (file) { %>
        <link rel="stylesheet" type="text/css" href="/<%= file %>" />
    <% }); %>

    <style type="text/css">
    @media print {
        * {
          word-break: break-word;
        }
        blockquote {
            margin-left: 1rem !important;
            padding: 0 !important;
        }
        blockquote blockquote blockquote {
            margin-left: 0 !important;
        }
    }
    </style>

    <style>
    body,
    body .pm_opensans {
        font-family: "Lucida Console", "Lucida Sans Typewriter", Monaco, "Bitstream Vera Sans Mono", monospace;
    }
    body{
        font-size:12.5px
    }
    body .composer .meta .pm_button,
    body .composer header .pm_button,
    body .pm_buttons .pm_dropdown > a,
    body .pm_dropdown > a {
        background: none!important;
        box-shadow: none!important
    }
    body .pm_button,
    body .pm_buttons a {
        box-shadow: 0 2px 0 1px #999 !important;
        border-radius: 0 !important;
    }
    body .pm_buttons {
        border-radius: 0 !important;
    }
    body .pm_button:active,
    body .pm_buttons a:active {
        box-shadow: 0 1px 0 1px #999 !important;
        position: relative;
        top: 1px;
    }
    body .pm_button {
        background-image: -webkit-linear-gradient(#fff, #ccc)!important;
        background-image: linear-gradient(#fff, #ccc)!important;
        background: -moz-linear-gradient(#fff, #ccc)!important
    }
    body .pm_button.primary {
        background: #444!important;
        background-image: -webkit-linear-gradient(#444, #222)!important;
        background-image: linear-gradient(#444, #222)!important;
        text-shadow: none!important;
        color: #fff!important;
        border-color: transparent!important
    }
    body .pm_buttons a {
        background-image: -webkit-linear-gradient(#fff, #ccc)!important;
        background-image: linear-gradient(#fff, #ccc)!important;
        background: -moz-linear-gradient(#fff, #ccc)!important
    }
    body #pm_composer .composer header,
    body body.secure section#pm_sidebarMobile,
    body header#pm_header .logo,
    body header#pm_header.no-auth,
    body html.protonmail body,
    body section.sidebar {
        background: #fff!important
    }
    body header#pm_header form.searchForm fieldset {
        background-color: #404040!important
    }
    body header#pm_header form.searchForm fieldset button[type=button] {
        background: #666!important
    }
    body header#pm_header ul.navigation li.active a,
    body header#pm_header ul.navigation li:hover a {
        border-top-color: #fff!important
    }
    header#pm_header-desktop a.logo {
        display: none;
    }
    body section.sidebar {
        padding: 15px 20px;
        box-shadow: inset -1px 0 0 0px #ccc
    }
    body section.sidebar ul.menu li.active a,
    body section.sidebar ul.menu li a:active,
    body section.sidebar div.labels ul li.active a,
    body section.sidebar div.labels ul li a:active {
        color: #000;
        background: transparent !important;
        font-weight: bold;
    }
    body section.sidebar ul.menu li a:hover,
    body section.sidebar div.labels ul li a:hover {
        color: #333;
    }
    body section.sidebar ul.menu li a,
    body section.sidebar ul.menu li a,
    body section.sidebar div.labels ul li a {
        color: #666;
    }
    body section.sidebar ul.menu li a i.fa,
    body section.sidebar ul.menu li a em {
        color: #ccc;
    }
    @media (max-width: 400px) {
        body header#pm_header form.searchForm {
            background: #fff!important
        }
    }
    body #pm_conversations.columns .list div.message.active,
    body #pm_conversations.columns .list div.message.active article .pm_labels .pm_label,
    body #pm_conversations.columns .list div.message.active header span.time,
    body #pm_conversations.columns .list div.message.unread.active,
    body #pm_conversations.columns .list div.message.unread.active header span.time,
    body #pm_conversations.columns .list div.message.unread.active header span.time article .pm_labels .pm_label,
    body header#pm_header {
        background: #555!important
    }
    body #pm_conversations.columns .list div.message.unread.active header span.time article .pm_labels .pm_label {
        box-shadow: 0 0 0 4px #555!important
    }
    body .pm_table th {
        color: #555!important
    }
    #pm_settings .pm_tabs {
        background: #555 !important;
    }
    #pm_settings .pm_tabs li a.pm_button {
        color: #000 !important
    }
    </style>

    <ng-include src="'templates/partials/custom-theme.tpl.html'"></ng-include>
</head>
<body class="" id="{{ toState }}" ng-class="{
    locked: (isLoggedIn && isLocked) || ('login'|isState) || ('login.unlock'|isState) || ('eo.unlock'|isState) || ('eo.message'|isState) || ('reset'|isState) || ('eo.reply'|isState) || ('reset'|isState),
    login:!isLoggedIn,
    unlock:isLocked,
    secure:isSecure,
    blank:!!isBlank,
    activeComposer:activeComposer,
    maximizedComposer:maximizedComposer,
    light: ('support.reset-password'|isState) || ('step1'|isState) || ('pre-invite'|isState) || ('support.message'|isState),
    scroll: ('step1'|isState) || ('secured.print'|isState),
    modalOpen: modalOpen,
    mobileMode: mobileMode,
    rows: (layoutMode==='rows'),
    tourActive: tourActive,
    themeJason: themeJason
}">

<div
id="pm_background"
ng-hide="mobileMode"
ng-class="{ 'tablet': showSidebar }"
ng-click="showSidebar = false"
ng-hide="printMode"></div>

<div id="pm_slow">Loading ProtonMail...</div>
<div id="pm_slow2" style="display:none;">Loading Message...</div>
<div id="loading_pm">
    <noscript style="padding: 2rem; display:block; text-align: center;">ProtonMail requires Javascript. Enable Javascript and reload this page to continue.</noscript>
</div>

<div id="pm_loading" ng-class="{ 'show': networkActivity.loading() || loggingOut }">
    <img src="/assets/small-spinner.gif">
</div>

<div id="exiting" ng-class="{ 'show': loggingOut }">
    <img src="/assets/img/decrypt1.gif" class="loader">
    <p>LOGGING OUT...</p>
</div>

<div ui-view="main" autoscroll="false" id="body"></div>
<% scripts.forEach(function (file) { %>
    <script type="text/javascript" src="/<%= file %>"></script>
<% }); %>

<script type="text/javascript">
    if(window.location.href.indexOf("/eo/") > -1) {
        document.getElementById('pm_slow').style.display = 'none';
        document.getElementById('pm_slow2').style.display = 'block';
    }
    else {
        document.getElementById('pm_slow').style.display = 'block';
        document.getElementById('pm_slow2').style.display = 'none';
    }

    // required features check
    function is_good_prng_available() {
        if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {
            return true;
        } else if (typeof window !== 'undefined' && typeof window.msCrypto === 'object' && typeof window.msCrypto.getRandomValues === 'function') {
            return true;
        } else {
            return false;
        }
    }
    if (navigator.cookieEnabled===false) {
        alert('Cookies are required to use ProtonMail. Please enable cookies in your browser.');
        window.location = "https://protonmail.com/compatibility";
    }
    if(typeof Storage === "undefined") {
        alert('sessionStorage is required to use ProtonMail. Please enable sessionStorage in your browser.');
        window.location = "https://protonmail.com/compatibility";
    }
    if (is_good_prng_available()===false) {
        alert('A browser that has a Psudeo Random Number Generator is required to use ProtonMail. Please update your browser.');
        window.location = "https://protonmail.com/compatibility";
    }
</script>
</body>
</html>
