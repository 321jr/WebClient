<!doctype html>
<html lang="en" ng-app="proton">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <base href="/">
    <title>ProtonMail</title>
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon_57.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/favicon_57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon_72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon_114.png">
    <link rel="apple-touch-icon" sizes="128x128" href="/assets/favicon_128.png">
    <link rel="apple-touch-icon" sizes="195x195" href="/assets/favicon_195.png">
    <meta name="application-name" content="ProtonMail">
    <meta name="msapplication-TileImage" content="/assets/favicon_128.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">


    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,600,300,300italic,400italic,600italic,700italic,800italic,800' rel='stylesheet' type='text/css'>        
    <link  href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        
    <script type="text/javascript">
    function is_good_prng_available() {
        if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {
            return true;
        } else if (typeof window !== 'undefined' && typeof window.msCrypto === 'object' && typeof window.msCrypto.getRandomValues === 'function') {
            return true;
        } else {
            return false;
        }
    }
    function isSessionStorage_available() {
        return (typeof(sessionStorage) !== 'undefined');
    }

    if(!isSessionStorage_available()) { 
        alert('Error: sessionStorage is required to use ProtonMail.');
        setTimeout( function() {
            window.location = 'https://support.protonmail.ch/knowledge-base/sessionstorage/';            
        }, 1000);
    }
    if (!is_good_prng_available()) {
        alert('Error: a PRNG is required to use ProtonMail.');
        setTimeout( function() {
            window.location = 'https://support.protonmail.ch/knowledge-base/prng/';
        }, 1000);
    }

    </script>
        
    <% styles.forEach(function (file) { %>
        <link rel="stylesheet" type="text/css" href="/<%= file %>" />
    <% }); %>
    <ng-include src="'templates/partials/custom-theme.tpl.html'"></ng-include>
</head>
<body
ontouchstart 
id="{{ toState }}"
ng-class="{
    locked: (isLoggedIn && isLocked) || ('login'|isState) || ('login.unlock'|isState) || ('eo.unlock'|isState) || ('eo.message'|isState) || ('reset'|isState) || ('eo.reply'|isState),
    login:!isLoggedIn,unlock:isLocked,secure:isSecure(),
    blank:!!isBlank,
    rows: (layoutMode==='rows'),
    columns: (layoutMode==='columns'),
    activeComposer:activeComposer}
">

<div id="pm_background" ng-if="(isLoggedIn && !isLocked)"></div>

<div id="loading">
    <noscript style="padding: 2rem; display:block; text-align: center;">ProtonMail requires Javascript. Enable Javascript and reload this page to continue.</noscript>
    <ng-include src="'templates/partials/loader.tpl.html'"></ng-include>
</div>

<div style="display:block; z-index:9999999; position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: #fff;" ng-if="networkActivity.loading()">
    <img src="http://www.ajaxload.info/cache/FF/FF/FF/00/00/00/21-0.gif" style="display: block; opacity: .8; position: absolute; right: 1rem; bottom: 1rem">
</div>
<div ui-view="main" autoscroll="false" id="body"></div>
<% scripts.forEach(function (file) { %>
    <script type="text/javascript" src="/<%= file %>"></script>
<% }); %>

</body>
</html>