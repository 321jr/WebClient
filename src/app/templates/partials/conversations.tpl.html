<ng-include ng-if="layoutMode === 'columns'" src="'templates/partials/toolbar-list-columns.tpl.html'"></ng-include>

<ng-include ng-if="layoutMode === 'rows'" src="'templates/partials/toolbar-list-rows.tpl.html'"></ng-include>

<ng-include ng-if="layoutMode === 'rows'" src="'templates/partials/toolbar-list-rows-responsive.tpl.html'"></ng-include>

<div ng-if="layoutMode === 'columns'" id="pm_list" pt-height>

    <table ng-if="conversations.length === 0" id="nothingToSeeHere">
        <tr>
            <td>
                <i class="fa" ng-class="{
                    'fa-inbox': mailbox === 'inbox',
                    'fa-file-text-o': mailbox === 'drafts',
                    'fa-sign-out': mailbox === 'sent',
                    'fa-trash-o': mailbox === 'trash',
                    'fa-ban': mailbox === 'spam',
                    'fa-star-o': mailbox === 'starred',
                    'fa-archive': mailbox === 'archive',
                    'fa-search': mailbox === 'search',
                    'fa-tag': mailbox === 'label'
                }"></i>
                <span ng-show="mailbox === 'inbox'">{{ 'INBOX' | translate }}</span>
                <span ng-show="mailbox === 'drafts'">{{ 'DRAFTS' | translate }}</span>
                <span ng-show="mailbox === 'sent'">{{ 'SENT' | translate }}</span>
                <span ng-show="mailbox === 'trash'">{{ 'TRASH' | translate }}</span>
                <span ng-show="mailbox === 'spam'">{{ 'SPAM' | translate }}</span>
                <span ng-show="mailbox === 'starred'">{{ 'STAR' | translate }}</span>
                <span ng-show="mailbox === 'archive'">{{ 'ARCHIVE' | translate }}</span>
                <span ng-show="mailbox === 'search'">{{ 'SEARCH' | translate }}</span>
                <span ng-show="mailbox === 'label'">{{ 'LABEL' | translate }}</span>
                <h3>{{ 'NO_MESSAGES' | translate }}</h3>
            </td>
        </tr>
    </table>

    <div ng-click="click(conversation)" ng-repeat="conversation in conversations track by conversation.ID" class="message" 
    ng-class="{
        unread: conversation.NumUnread > 0 || conversation.IsRead === 0, 
        selected: conversation.Selected, 
        active: conversation.Active, 
        starred: starred(conversation),
        attachments: (conversation.NumAttachments > 0)
    }">
        <aside>
            <span class="pm_checkbox">
                <input type="checkbox" ng-model="conversation.Selected" ng-click="$event.stopPropagation();select($event, conversation)" />
            </span>
        </aside>
        <header>
            <p>
                <span class="number" ng-show="conversation.NumMessages > 1">({{ conversation.NumMessages }})</span>

                <span title="{{ conversation.Subject }}">
                    <i class="fa fa-reply" ng-show="conversation.IsReplied === 1"></i>
                    <i class="fa fa-reply-all" ng-show="conversation.IsRepliedAll === 1"></i>
                    <i class="fa fa-mail-forward" ng-show="conversation.IsForwarded === 1"></i>
                    <i class="fa fa-clock-o" ng-show="conversation.ExpirationTime > 0"></i>
                    {{ conversation.Subject }}
                </span>
                <i class="fa fa-paperclip" ng-class="{ 'show': conversation.NumAttachments > 0 }"></i>                
                <a href ng-click="$event.stopPropagation();toggleStar(conversation)" class="starLink" title="{{ 'STAR_CONVERSATION' | translate }}">
                    <i class="fa" ng-class="{'fa-star': starred(conversation), 'fa-star-o': !starred(conversation)}"></i>
                </a>
                <span class="time">{{ conversation.Time | readableTime }}</span>
            </p>
        </header>
        <article>
            <p class="pm_labels">
                <location-tag class="locTag"></location-tag>
                <a ng-repeat="labelID in conversation.LabelIDs | labels" title="{{ getLabel(labelID).Name }}" class="pm_label" ng-style="getStyleLabel(labelID)" ng-show="getLabel(labelID).Name" ng-click="$event.stopPropagation();goToLabel(labelID)">
                    <em>{{ getLabel(labelID).Name }}</em>
                    <i>{{ getLabel(labelID).Name | limitTo: 3 }}</i>
                </a>
            </p>
            <strong ng-hide="('secured.sent.**' | includedByState) || ('secured.drafts.**' | includedByState)" ng-repeat="contact in conversation.Senders" title="{{ contact.Address }}">
                {{ contact.Name || contact.Address }}<b ng-hide="$last">, </b>
            </strong>
            <strong ng-show="('secured.sent.**' | includedByState) || ('secured.drafts.**' | includedByState)" ng-repeat="contact in conversation.Recipients" title="{{ contact.Address }}">
                {{ contact.Name || contact.Address }}<b ng-hide="$last">, </b>
            </strong>
        </article>
    </div>
</div>

<div ng-if="layoutMode === 'rows'" id="pm_list" pt-height>
    <div ng-click="click(conversation)" ng-repeat="conversation in conversations track by conversation.ID" class="message" ng-class="{unread: conversation.NumUnread > 0 || conversation.IsRead === 0, selected: conversation.Selected, active: conversation.Active, starred: starred(conversation)}">
        <label class="pm_checkbox" ng-click="$event.stopPropagation();">
            <input type="checkbox" ng-model="conversation.Selected" ng-click="select($event, conversation)" />
            <em class="fa fa-check"></em>
        </label>
        <span class="star" ng-click="$event.stopPropagation();toggleStar(conversation)">
            <a href class="starLink" title="{{ 'STAR_MESSAGE' | translate }}">
                <i class="fa" ng-class="{'fa-star': starred(conversation), 'fa-star-o': !starred(conversation)}"></i>
            </a>
        </span>
        <span class="sender">
            <span class="number" ng-show="conversation.NumMessages > 1">({{ conversation.NumMessages }})</span>
            <span ng-hide="('secured.sent.**' | includedByState) || ('secured.drafts.**' | includedByState)" ng-repeat="contact in conversation.Senders">
                {{ contact.Name || contact.Address }}<b ng-hide="$last">, </b>
            </span>
            <span ng-show="('secured.sent.**' | includedByState) || ('secured.drafts.**' | includedByState)" ng-repeat="contact in conversation.Recipients">
                {{ contact.Name || contact.Address }}<b ng-hide="$last">, </b>
            </span>
        </span>
        <span class="placeholderSpan"><span>&nbsp;</span></span>
        <span class="subject">
            <span title="{{ conversation.Subject }}">
                <i class="fa fa-reply" ng-show="conversation.IsReplied === 1"></i>
                <i class="fa fa-reply-all" ng-show="conversation.IsRepliedAll === 1"></i>
                <i class="fa fa-mail-forward" ng-show="conversation.IsForwarded === 1"></i>
                <i class="fa fa-clock-o" ng-show="conversation.ExpirationTime > 0"></i>
                {{ conversation.Subject }}
            </span>
            <span class="pm_labels inline">
                <location-tag class="locTag"></location-tag>
                <a ng-repeat="labelID in conversation.LabelIDs | labels" title="{{ getLabel(labelID).Name }}" class="pm_label" ng-style="getStyleLabel(labelID)" ng-show="getLabel(labelID).Name" ng-click="$event.stopPropagation();goToLabel(labelID)">
                    <em>{{ getLabel(labelID).Name }}</em>
                    <i>{{ getLabel(labelID).Name | limitTo: 3 }}</i>
                </a>
            </span>
        </span>
        <span class="size">{{ conversation.TotalSize || conversation.Size | humanSize }}</span>
        <i class="fa fa-paperclip" ng-class="{ 'show': conversation.NumAttachments > 0 }"></i>
        <span class="time">{{ conversation.Time | readableTime }}</span>
    </div>
</div>
