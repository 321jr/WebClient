<div ng-controller="HeaderController">
    <div class="spinner" ng-show="networkActivity.loading()">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
    <!--/.spinner-->
    <nav id="navbar" class="navbar navbar-default navbar-static-top navbar-inverse navbar-inversed hidden-xs" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-large">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand" ng-if="!isSecure">
                    <img src="/assets/img/protonmail_logo_beta.png" alt="ProtonMail" />
                </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse-large">
                <form id="search-form" class="navbar-form navbar-left visible-md-block visible-lg-block" role="search" ng-class="{'focus': !!searchInputFocus}" ng-if="('secured.*' | includedByState) && isInMailbox">
                    <div class="input-group form-group">
                        <input type="text" class="form-control" placeholder="{{ 'SEARCH' | translate }}" autocomplete="off" ng-model="params.searchInput" ng-enter="search()" ng-focus="onFocusSearch()" ng-blur="onBlurSearch()" />
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-toggle" type="button" ng-click="openSearchModal()" pt-tooltip="{{ 'ADVANCED_SEARCH' | translate }}" pt-placement="bottom"><span class="fa fa-caret-down"></span></button>
                            <button class="btn btn-default" type="button" ng-click="search()" pt-tooltip="Search" pt-placement="bottom"><span class="fa fa-search"></span></button>
                        </span>
                    </div>
                    <!-- /input-group -->
                </form>
                <a href id="searchMob" class="visible-sm-block visible-xs-block pull-left" role="search" ng-if="'secured.**' | includedByState" ng-click="openSearchModal()"><span class="fa fa-search"></span></a>
                <div error-reporter class="alert alert-danger centered ng-hide">
                    <button type="button" class="close" ng-click="errorReporter.active = false">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{ 'CLOSE' | translate }}</span>
                    </button>
                    {{ errorReporter.error }}
                </div>
                <ul class="nav navbar-nav navbar-right">
                    <li id="nav_contact" ng-if="isLoggedIn && ('secured.**' | includedByState)">
                        <a href ui-sref="secured.contacts" ui-sref-active="active"><span class="visible-lg-inline-block fa fa-users"></span> {{ 'CONTACTS' | translate }}</a>
                    </li>
                    <li class="dropdown" ng-if="isLoggedIn">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <em ng-bind-html="user.DisplayName"></em> <i class="fa fa-caret-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            <li>
                                <a href ng-click="openWizard()"><i class="fa fa-magic"></i>{{ 'WIZARD' | translate }}</a>
                            </li>
                            <li>
                                <a ui-sref="secured.settings"><i class="fa fa-cog"></i>{{ 'SETTINGS' | translate }}</a>
                            </li>
                            <li>
                                <a href ng-click="openReportModal()"><i class="fa fa-bug"></i>{{ 'BUG' | translate }}</a>
                            </li>
                            <li>
                                <a ng-click="logout()" href><i class="fa fa-power-off"></i>{{ 'LOGOUT' | translate }}</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>
    <nav class="navbar navbar-default navbar-static-top navbar-inverse navbar-inversed visible-xs-block" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle btn btn-dark" data-toggle="collapse" data-target="#navbar-collapse-small">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="spinner" ng-show="networkActivity.loading()">
                    <div class="bounce1"></div>
                    <div class="bounce2"></div>
                    <div class="bounce3"></div>
                </div>
                <div class="pull-right">
                    <button type="button" class="btn btn-dark navbar-btn" ng-click="openSearchModal()">
                        <i class="fa fa-search"></i>
                    </button>
                    <button type="button" style="margin-right: 15px;" class="btn btn-dark navbar-btn" ng-click="openNewMessage()">
                        <i class="fa fa-pencil"></i>
                    </button>
                </div>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse-small">
                <div error-reporter class="alert alert-danger centered ng-hide">
                    <button type="button" class="close" ng-click="errorReporter.active = false">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">{{ 'CLOSE' | translate }}</span>
                    </button>
                    {{ errorReporter.error }}
                </div>
                <table class="table">
                    <tr>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.compose"><span class="fa fa-pencil"></span> {{ 'COMPOSE' | translate }}</a>
                        </td>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.inbox" ng-class="{ active: ('secured.inbox.**' | includedByState) }"><span class="fa fa-inbox"></span> {{ 'INBOX' | translate }}<span class="label" ng-class="{active: unreadCount > 0}">{{unreadCount}}</span></a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.drafts" ng-class="{ active: ('secured.drafts.**' | includedByState) }"><span class="fa fa-file-text-o"></span> {{ 'DRAFTS' | translate }}<span class="label" ng-class="{active: draftsCount > 0}">{{draftsCount}}</span></a>
                        </td>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.sent" ng-class="{ active: ('secured.sent.**' | includedByState) }"><span class="fa fa-sign-out"></span> {{ 'SENT' | translate }}</a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.trash" ng-class="{ active: ('secured.trash.**' | includedByState) }"><span class="fa fa-trash-o"></span> {{ 'TRASH' | translate }}</a>
                        </td>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.starred" ng-class="{ active: ('secured.starred.**' | includedByState) }"><span class="fa fa-star"></span> {{ 'STARRED' | translate }}</a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.spam" ng-class="{ active: ('secured.spam.**' | includedByState) }"><span class="fa fa-ban"></span> {{ 'SPAM' | translate }}</a>
                        </td>
                        <td>
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.contacts" ui-sref-active="active"><span class="fa fa-book"></span> {{ 'CONTACTS' | translate }}</a>
                        </td>
                    </tr>
                    <tr>
                        <td id="nav_settings" ng-if="'secured.**' | includedByState">
                            <a onclick='javascript:$(".navbar-toggle").click()' ui-sref="secured.settings"><span class="fa fa-cog"></span> {{ 'SETTINGS' | translate }}</a>
                        </td>
                        <td id="nav_login" ng-if="!isLoggedIn">
                            <a ui-sref="login"><span class="fa fa-power-off"></span> Login</a>
                        </td>
                        <td id="nav_logout" ng-if="isLoggedIn">
                            <a onclick='javascript:$(".navbar-toggle").click()' ng-click="logout()" href><span class="fa fa-power-off"></span> {{ 'LOGOUT' | translate }}</a>
                        </td>
                    </tr>
                </table>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>
</div>
