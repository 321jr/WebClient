<p>&nbsp;</p>
<div class="pm_panel wide" ng-hide="creating">
    <div class="text-center header">
        <img src="/assets/img/logo-dark.png" height="20"><br>
        <h2><i class="fa fa-user"></i>{{ 'CREATE_YOUR_ACCOUNT' | translate }}</h2>
        <p ng-if="preInvited">For: <strong>{{ account.Username }}@protonmail.com</strong></p>
    </div>
    <form method="post" ng-submit="saveContinue(step1)" name="step1" role="form" novalidate   class="pm_form">
        <p class="alert">
        Take back your privacy! Creating your free secure email account takes less than 2 minutes in most cases.
        </p>
        <div class="wrapper">
            <div ng-if="!preInvited">
                <label for="Username">
                    <em class="num" ng-if="!preInvited">1</em>
                    {{ 'USERNAME' | translate | capitalize }}
                </label>
                <div class="usernameWrap">
                    <p class="help">This will be your email address.</p>
                    <input
                    type="text"
                    ng-model="account.Username"
                    name="Username"
                    tabindex="1"
                    placeholder="CHOOSE USERNAME"
                    required
                    ng-readonly="readOnlyUsername"
                    id="Username"
                    class="dead"
                    ng-class="{ 
                        'success':goodUsername,
                        'error':badUsername
                    }"
                    ng-change="checkAvailability(true)"
                    ng-model-options="{ debounce: 600 }"
                    pt-tooltip="You can switch to protonmail.ch after account creation."
                    pt-placement="bottom">
                    <em class="usernameDomain">@protonmail.com</em>
                    <em class="fa fa-spin fa-spinner" ng-show="checkingUsername"></em> 
                </div>
            </div>
            <div ng-show="goodUsername">
                <p class="alert alert-success animated tada"><i class="fa fa-check"></i> Email available!</p>
            </div>
            <div ng-show="badUsername">
                <p class="alert alert-danger animated shake"><i class="fa fa-times"></i> Email already taken.</p>
            </div>
            <label for="password">
                <em class="num" ng-if="preInvited">1</em>
                <em class="num" ng-if="!preInvited">2</em>
                {{ 'LOGIN_PASSWORD' | translate }}
            </label>
            <p class="help">This is used to log you into our system.</p>
            <input
            id="password"
            name="password"
            ng-model="account.loginPassword"
            tabindex="2"
            type="password"
            class="form-control margin"
            placeholder="CHOOSE A LOGIN PASSWORD"
            maxlength="{{ maxPW }}"
            required />
            <div ng-show="step1.$submitted || step1.password.$touched">
                <p ng-show="step1.$submitted && step1.password.$error.required" class="alert alert-danger">Login password is required.</p>
            </div>
            <input
            id="passwordc"
            name="passwordc"
            ng-model="account.loginPasswordConfirm"
            tabindex="3"
            type="password"
            class="form-control"
            placeholder="CONFIRM LOGIN PASSWORD"
            required
            validator="account.loginPassword !== account.loginPasswordConfirm" />
            <div ng-show="step1.$submitted || step1.passwordc.$touched">
                <p ng-show="account.loginPassword !== account.loginPasswordConfirm" class="alert alert-danger">{{ 'PASSWORDS_DONT_MATCH' | translate }}.</p>
            </div>
            <label for="password">
                <em class="num" ng-if="preInvited">2</em>
                <em class="num" ng-if="!preInvited">3</em>
                {{ 'MAILBOX_PASSWORD' | translate }}
            </label>
            <p class="help">This is used to encrypt and decrypt your messages. This is private and only you know it.</p>
            <input
            id="MBpassword"
            name="MBpassword"
            ng-model="account.mailboxPassword"
            tabindex="4"
            type="password"
            class="form-control margin"
            placeholder="CHOOSE A MAILBOX PASSWORD"
            required />
            <div ng-show="step1.$submitted || step1.MBpassword.$touched">
                <p ng-show="step1.$submitted && step1.MBpassword.$error.required" class="alert alert-danger">Mailbox password is required.</p>
            </div>
            <input
            id="MBpasswordc"
            name="MBpasswordc"
            ng-model="account.mailboxPasswordConfirm"
            tabindex="5"
            type="password"
            class="form-control"
            ng-class="{disabled: networkActivity.loading()}"
            placeholder="CONFIRM MAILBOX PASSWORD"
            required
            ng-enter="finish(step1)" />
            <div ng-show="step1.$submitted || step1.MBpasswordc.$touched">
                <p ng-show="account.mailboxPassword !== account.mailboxPasswordConfirm" class="alert alert-danger">{{ 'PASSWORDS_DONT_MATCH' | translate }}.</p>
            </div>
            <label for="notificationEmail">
                <em class="num" ng-if="preInvited">3</em>
                <em class="num" ng-if="!preInvited">4</em>
                Recovery Email (Optional)
            </label>
            <p class="help">This is used to recover your account if you get locked out or forget your login password.</p>
            <input
            id="notificationEmail"
            name="notificationEmail"
            ng-model="account.notificationEmail"
            tabindex="6"
            type="email"
            class="form-control"
            placeholder="Recovery {{ 'EMAIL' | translate }}"
            validator="notificationEmailValidation()"
            ng-required="false"
            ng-enter="saveContinue(step1)" />
            <div ng-show="step1.notificationEmail.$error.email">
                <p class="alert alert-danger">{{ 'INVALID_EMAIL' | translate }}l.</p>
            </div>
            <div ng-if="!preInvited">
                <label for="password">
                    <em class="num" ng-if="preInvited">4</em>
                    <em class="num" ng-if="!preInvited">5</em>
                    {{ 'Anti-Spam' | translate }}
                </label>
                <iframe id="pm_captcha" src="https://secure.protonmail.com/recaptcha.html" sandbox="allow-scripts allow-same-origin" onload="captchaSendMessage()"></iframe>
            </div>
            <p ng-if="preInvited">&nbsp;</p>
        </div><!--/.wrapper-->
        <div class="checkbox" ng-show="false">
            <label for="optIn" class="optIn">
                <input
                tabindex="7"
                id="optIn"
                name="optIn"
                ng-init="account.optIn = true"
                ng-model="account.optIn"
                type="checkbox" /> Keep me updated about new features such as mobile apps.
            </label>
        </div>
        <button
        tabindex="8"
        type="submit"
        class="pm_button primary large"
        ng-class="{ disabled: ( networkActivity.loading() || !step1.$valid || ( (captcha_token === false) && !preInvited ) ) }">{{ 'COMPLETE_SETUP' | translate }}</button>
        <p>&nbsp;</p>
        <p><a ui-sref="login">Already have an account?</a></p>
    </form>
</div>

<div class="pm_panel wide" ng-show="creating" id="signUpProcess">
    <div class="text-center header">
        <img src="/assets/img/logo-dark.png" height="20"><br>
        <div id="robotLoader" ng-show="creating && !signupError">
            <div class="spinner large">
                <div class="spinner1"></div>
                <div class="spinner2"></div>
                <div class="spinner3"></div>
                
            </div>
        </div>
        <h2 class="text-center" ng-show="!signupError">Creating Account</h2>
        <h2 class="text-center" ng-show="signupError">Sign Up Failed</h2>
    </div>
    <p class="alert alert-danger" ng-show="signupError">An error occured while trying to create your account. To see common problems and solutions <a target="_blank" href="https://protonmail.com/support/knowledge-base/common-sign-up-problems-and-solutions/">click here</a>.</p>
    <div class="wrapper text-left">
        <ol id="creationList">
            <li ng-class="{ 'done': genNewKeys }">
                <i ng-class="{ 'show': genNewKeys }" class="fa fa-check"></i>
                Generating Encryption Keys
            </li>
            <li ng-class="{ 'done': createUser }">
                <i ng-class="{ 'show': createUser }" class="fa fa-check"></i>
                Creating New User
            </li>
            <li ng-class="{ 'done': logUserIn }">
                <i ng-class="{ 'show': logUserIn }" class="fa fa-check"></i>
                Verifying New Account
            </li>
            <li ng-class="{ 'done': decryptAccessToken }">
                <i ng-class="{ 'show': decryptAccessToken }" class="fa fa-check"></i>
                Verifying Encryption Keys
            </li>
            <li ng-class="{ 'done': mailboxLogin }">
                <i ng-class="{ 'show': mailboxLogin }" class="fa fa-check"></i>
                Loading New Account
            </li>
            <li ng-class="{ 'done': getUserInfo }">
                <i ng-class="{ 'show': getUserInfo }" class="fa fa-check"></i>
                Done!
            </li>
            <li ng-class="{ 'done': finishCreation }">
                <i ng-class="{ 'show': finishCreation }" class="fa fa-check"></i>
                Redirecting
            </li>
        </ol>
    </div>
</div>
<div id="pm_footer" class="static">
    <p>&copy; 2015 ProtonMail.com - Made globally, hosted in Switzerland.</p>
</div>
