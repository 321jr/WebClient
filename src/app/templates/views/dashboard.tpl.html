<div id="pm_settings">
    <ng-include src="'templates/partials/menu.settings.tpl.html'"></ng-include>
    <div class="settings" pt-height>
        <div class="row">
            <section class="pm_form" ng-hide="subscription.Name === 'free'">
                <legend>{{ 'CURRENT_SUBSCRIPTION' | translate }}: {{ subscription.Name | capitalize }} {{ 'PLAN' | translate }}</legend>
                <div class="pm_grid">
                    <div class="col-1-2">
                        <table class="pm_table plain">
                            <tr>
                                <th>{{ 'CUSTOM_DOMAINS' | translate }}:</th>
                                <td>
                                    <strong>{{ count('MaxDomains') }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'ADDRESSES' | translate }}:</th>
                                <td>
                                    <strong>{{ count('MaxAddresses') }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'STORAGE' | translate }}:</th>
                                <td>
                                    <strong>{{ count('MaxSpace') | humanSize }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'USERS' | translate }}:</th>
                                <td>
                                    <strong>{{ count('MaxMembers') }}</strong>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-1-2">
                        <table class="pm_table plain">
                            <tr>
                                <th>{{ 'PRICE' | translate }}:</th>
                                <td>
                                    <strong>{{ subscription.Amount / 100 | currency: subscription.Currency }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'BILLING_CYCLE' | translate }}:</th>
                                <td>
                                    <strong ng-show="subscription.Cycle === 1">{{ 'MONTHLY' | translate }}</strong>
                                    <strong ng-show="subscription.Cycle === 12">{{ 'YEARLY' | translate }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'DURATION' | translate }}:</th>
                                <td>
                                    <strong>{{ subscription.PeriodStart * 1000 | date }} - {{ subscription.PeriodEnd * 1000 | date }}</strong>
                                </td>
                            </tr>
                            <tr>
                                <th>{{ 'PAYMENT' | translate }}:</th>
                                <td>
                                    <strong>
                                        <i class="fa fa-credit-card"></i> {{ 'CREDIT_CARD' | translate }}
                                    </strong>
                                    &nbsp;<a href="#" ng-click="card()" pt-tooltip="{{ 'PAYMENT_INFORMATION' | translate }}">{{ 'EDIT' | translate }}</a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </section>
        </div>

        <div class="row">
            <section class="setting pm_form full" id="plans">
                <legend>{{ 'PLANS' | translate }}</legend>
                <header>
                    <a href="https://protonmail.com/support/knowledge-base/manage-your-plan" class="pm_button link pull-right">Learn how to manage your ProtonMail plan.</a>
                    <div class="group">
                        <label>{{ 'CURRENCY' | translate }}</label>
                        <div class="pm_buttons">
                            <a href="#" ng-click="changeCurrency('EUR')" ng-class="{'active': currentCurrency === 'EUR'}">EUR</a>
                            <a href="#" ng-click="changeCurrency('USD')" ng-class="{'active': currentCurrency === 'USD'}" class="divider">USD</a>
                            <a href="#" ng-click="changeCurrency('CHF')" ng-class="{'active': currentCurrency === 'CHF'}" class="divider">CHF</a>
                        </div>
                    </div>
                    <div class="group">
                        <label>{{ 'BILLING' | translate }}</label>
                        <div class="pm_buttons">
                            <a href="#" ng-click="changeCycle(1)" ng-class="{'active': currentCycle === 1}">{{ 'MONTHLY' | translate }}</a>
                            <a href="#" ng-click="changeCycle(12)" ng-class="{'active': currentCycle === 12}" class="divider">{{ 'YEARLY' | translate }} <small class="text-green">{{ 'SAVE_20%' | translate }}</small></a>
                        </div>
                    </div>
                </header>
                <div class="pm_grid plans">
                    <div class="col-1-3" ng-repeat="plan in plans | filter: {Type: 1} | orderBy: 'Amount'" ng-show="plan.display === true">
                        <div class="plan" ng-class="{'selected': plan.Name === subscription.Name}">
                            <header>{{ 'YOUR_CURRENT_PLAN' | translate }}</header>
                            <h3>{{ plan.Title }}</h3>
                            <ul class="features">
                                <li>
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="plan.Space" ng-options="option.label for option in spaceOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false">{{ plan.MaxSpace | humanSize }}</strong> <strong>{{ 'STORAGE' | translate }}</strong>
                                    <span class="cost" ng-show="plan.Space.index * spaceAddon.Amount">
                                        <strong>{{ plan.Space.index * spaceAddon.Amount / 100 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <li ng-class="{disabled: plan.MaxDomains === 0}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="plan.Domain" ng-options="option.label for option in domainOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false">{{ plan.MaxDomains }}</strong> <strong>{{ 'CUSTOM_DOMAIN' | translate }}</strong>
                                    <span class="cost" ng-show="plan.Domain.index * domainAddon.Amount">
                                        <strong>{{ plan.Domain.index * domainAddon.Amount / 100 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <li>
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="plan.Address" ng-options="option.label for option in addressOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false">{{ plan.MaxAddresses }}</strong> <stong>{{ 'ADDRESS' | translate }}</strong>
                                    <span class="cost" ng-show="plan.Address.index * addressAddon.Amount">
                                        <strong>{{ plan.Address.index * addressAddon.Amount / 100 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <!-- <li>
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="plan.Member" ng-options="option.label for option in memberOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong>{{ plan.MaxMembers }} {{ 'MEMBERS' | translate }}</strong>
                                    <span class="cost" ng-show="plan.Member.value * memberAddon.Amount">
                                        <strong>{{ plan.Member.value * memberAddon.Amount / 100 | currency: plan.Currency }}</strong>
                                    </span>
                                </li> -->
                            </ul>
                            <div class="price">
                                <strong>{{ 'TOTAL' | translate }}:</strong>
                                <span ng-show="plan.Amount === 0">{{ 'FREE' | translate }}</span>
                                <span ng-show="plan.Amount > 0">
                                    {{ total(plan) / 100 | currency: plan.Currency }}
                                    <span ng-show="plan.Cycle === 1">{{ 'PER_MONTH' | translate }}</span>
                                    <span ng-show="plan.Cycle === 12">{{ 'PER_YEAR' | translate }}</span>
                                </span>
                            </div>
                            <div class="action">
                                <button type="button" ng-click="choose(plan)" class="pm_button primary">
                                    <strong>{{ 'CHOOSE_PLAN' | translate }}</strong>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
