<div id="pm_settings">
    <ng-include src="'templates/partials/menu.settings.tpl.html'"></ng-include>
    <div class="settings" pt-height>
        <div class="row">
            <section class="pm_form">
                <div class="pm_grid">
                    <div class="col-1-2">
                        <legend>{{ 'OVERVIEW' | translate }}</legend>
                        <div class="well">
                            <table class="pm_table plain">
                                <tr>
                                    <th>{{ 'USERNAME' | translate }}:</th>
                                    <td>
                                        <strong>{{ user.DisplayName }}</strong>
                                    </td>
                                    <td class="text-right actions"></td>
                                </tr>
                                <tr>
                                    <th>{{ 'DOMAINS' | translate }}:</th>
                                    <td>
                                        <strong ng-show="organization">{{ organization.UsedDomains }} {{ 'OF' | translate }} {{ organization.MaxDomains }}</strong>
                                        <strong ng-show="organization === null">0</strong>
                                    </td>
                                    <td class="text-right actions">
                                        <a ui-sref="secured.domains">{{ 'MANAGE' | translate }}</a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'ADDRESSES' | translate }}:</th>
                                    <td>
                                        <strong ng-show="organization">{{ organization.UsedAddresses }} {{ 'OF' | translate }} {{ organization.MaxAddresses }}</strong>
                                        <strong ng-show="organization === null">1</strong>
                                    </td>
                                    <td class="text-right actions">
                                        <a ui-sref="secured.addresses">{{ 'MANAGE' | translate }}</a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>{{ 'STORAGE' | translate }}:</th>
                                    <td>
                                        <strong ng-show="organization">{{ organization.UsedSpace | humanSize }} {{ 'OF' | translate }} {{ organization.MaxSpace | humanSize }}</strong>
                                        <strong ng-show="organization === null">{{ user.UsedSpace | humanSize }} {{ 'OF' | translate }} {{ user.MaxSpace | humanSize }}</strong>
                                    </td>
                                    <td class="text-right actions"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="col-1-2" ng-hide="subscription.Name === 'free'">
                        <legend>{{ 'MY_SUBSCRIPTION' | translate }}</legend>
                        <div class="well">
                            <table class="pm_table plain">
                                <tr ng-repeat="plan in subscription.Plans | filter: {Type: 1}">
                                    <th style="width:7rem">{{ 'PLAN' | translate }}:</th>
                                    <td><strong>{{ plan.Title }}</strong></td>
                                    <td class="text-right actions">{{ plan.Amount / 100 | currency: plan.Currency }}</td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td><strong>{{ 'STORAGE' | translate }}</strong></td>
                                    <td class="text-right actions">{{ price('1gb') / 100 | currency: subscription.Currency }}</td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td><strong>{{ 'DOMAINS' | translate }}</strong></td>
                                    <td class="text-right actions">{{ price('1domain') / 100 | currency: subscription.Currency }}</td>
                                </tr>
                                <tr>
                                    <th></th>
                                    <td><strong>{{ 'ADDRESSES' | translate }}</strong></td>
                                    <td class="text-right actions">{{ price('5address') / 100 | currency: subscription.Currency }}</td>
                                </tr>
                                <tr>
                                    <th>{{ 'TOTAL_PRICE' | translate }}:</th>
                                    <td>
                                        <strong ng-show="subscription.Cycle === 1">{{ 'MONTHLY' | translate }}</strong>
                                        <strong ng-show="subscription.Cycle === 12">{{ 'YEARLY' | translate }}</strong>
                                    </td>
                                    <td class="text-right actions">{{ subscription.Amount / 100 | currency: subscription.Currency }}</td>
                                </tr>
                                <tr ng-show="credit > 0">
                                    <th>{{ 'AVAILABLE_CREDIT' | translate }}:</th>
                                    <td></td>
                                    <td class="text-right actions">{{ credit / 100 | currency: subscription.Currency }}</td>
                                </tr>
                                <tr>
                                    <th>{{ 'PAYMENT' | translate }}:</th>
                                    <td>
                                        <strong>{{ 'CREDIT_CARD' | translate }}</strong>
                                    </td>
                                    <td class="text-right actions">
                                        <a ui-sref="secured.methods" pt-tooltip="{{ 'PAYMENT_METHOD' | translate }}">{{ 'EDIT' | translate }}</a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="col-1-2 text-center" ng-show="subscription.Name === 'free'">
                        <img src="http://www.wwf.be/_media/panda_02_770723.jpg" alt="panda" style="width: 100%" />
                        <button type="button" class="pm_button primary" ng-click="">{{ 'DONATE' | translate }}</button>
                    </div>
                </div>
            </section>
        </div>

        <div class="row">
            <section class="setting pm_form full" id="plans">
                <legend>{{ 'PLANS_AND_PRICES ' | translate }}</legend>
                <header>
                    <a href="https://protonmail.com/support/knowledge-base/paid-plans/" target="_blank" class="pm_button link pull-right">Learn About ProtonMail Plans</a>
                    <div class="group">
                        <label>{{ 'CURRENCY' | translate }}</label>
                        <div class="pm_buttons">
                            <a href="#" ng-click="changeCurrency('EUR')" ng-class="{'active': configuration.currency === 'EUR'}">EUR</a>
                            <a href="#" ng-click="changeCurrency('USD')" ng-class="{'active': configuration.currency === 'USD'}" class="divider">USD</a>
                            <a href="#" ng-click="changeCurrency('CHF')" ng-class="{'active': configuration.currency === 'CHF'}" class="divider">CHF</a>
                        </div>
                    </div>
                </header>
                <div class="pm_grid plans">
                    <div class="col-1-3" ng-repeat="plan in plans | filter: {Type: 1, Cycle: configuration.cycle}: true | orderBy: 'Amount'" ng-show="plan.display === true">
                        <div class="plan">
                            <header ng-show="plan.Name === 'plus'">{{ 'PEOPLE_S_CHOICE' | translate }}</header>
                            <header ng-show="plan.Name === 'visionary'">{{ 'BEST_VALUE' | translate }}</header>
                            <h3>
                                <img src="assets/img/logo.png" alt="ProtonMail" />
                                <span>{{ plan.Title }}</span>
                            </h3>
                            <ul class="features">
                                <li>
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="selects.plus.space" ng-options="option.label for option in spaceOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false">{{ plan.MaxSpace | humanSize }}</strong> <strong>{{ 'STORAGE' | translate }}</strong>
                                    <span class="cost" ng-show="selects.plus.space.index * addons[plan.Cycle].space.Amount && plan.editable === true">
                                        <strong>+{{ selects.plus.space.index * addons[plan.Cycle].space.Amount / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <li ng-class="{disabled: plan.MaxDomains === 0}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="selects.plus.domain" ng-options="option.label for option in domainOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false && plan.MaxDomains > 0">{{ plan.MaxDomains }}</strong> <strong>{{ 'CUSTOM_DOMAINS' | translate }}</strong>
                                    <span class="cost" ng-show="selects.plus.domain.index * addons[plan.Cycle].domain.Amount && plan.editable === true">
                                        <strong>+{{ selects.plus.domain.index * addons[plan.Cycle].domain.Amount / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <li ng-class="{disabled: plan.MaxAddresses === 0}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <span class="pm_select" ng-show="plan.editable === true">
                                        <select ng-model="selects.plus.address" ng-options="option.label for option in addressOptions"></select>
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                    <strong ng-show="plan.editable === false && plan.MaxAddresses > 0">{{ plan.MaxAddresses }}</strong> <strong>{{ 'ADDRESSES' | translate }}</strong>
                                    <span class="cost" ng-show="selects.plus.address.index * addons[plan.Cycle].address.Amount && plan.editable === true">
                                        <strong>+{{ selects.plus.address.index * addons[plan.Cycle].address.Amount / 100 / plan.Cycle | fixed: 2 | currency: plan.Currency }}</strong>
                                    </span>
                                </li>
                                <li ng-class="{disabled: plan.Name === 'free'}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <strong>{{ 'UNLIMITED_SENDING' | translate }}</strong>
                                </li>
                                <li ng-class="{disabled: plan.Name === 'free'}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <strong>{{ 'UNLIMITED_LABELS' | translate }}</strong>
                                </li>
                                <li ng-class="{disabled: plan.Name === 'free'}">
                                    <i class="fa fa-check"></i>
                                    <i class="fa fa-times"></i>
                                    <strong>{{ 'PRIORITY_SUPPORT' | translate }}</strong>
                                </li>
                            </ul>
                            <div class="text-center" ng-show="plan.Name === 'free'">
                                <strong>{{ 'FOREVER_FREE' | translate }}</strong>
                                <p ng-show="subscription.Name === 'free'">You are currently subscribed to the free plan.</p>
                            </div>
                            <div class="cycle pm_grid" ng-hide="plan.Name === 'free'">
                                <label class="col-1-2">
                                    <input type="radio" ng-model="configuration.cycle" ng-value="1" /> {{ 'PAY_MONTHLY' | translate }}
                                </label>
                                <div class="col-1-2 text-right">
                                    <div>
                                        <span>{{ total(plan, 1) / 100 | fixed: 2 | currency: plan.Currency }}</span>
                                        <span>{{ 'MONTLY' | translate }}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="cycle pm_grid" ng-hide="plan.Name === 'free'">
                                <label class="col-1-2">
                                    <input type="radio" ng-model="configuration.cycle" ng-value="12" /> {{ 'PAY_YEARLY' | translate }}
                                </label>
                                <div class="col-1-2 text-right">
                                    <div>
                                        <span>{{ total(plan, 12) / 100 / 12 | fixed: 2 | currency: plan.Currency }}</span>
                                        <span>{{ 'MONTLY' | translate }}</span>
                                    </div>
                                    <div>
                                        <small>Billed as {{ total(plan, 12) / 100 | fixed: 2 | currency: plan.Currency }} per year</small>
                                    </div>
                                </div>
                            </div>
                            <div class="action">
                                <button type="button" ng-click="choose(plan)" class="pm_button" ng-class="{dead: plan.Name === subscription.Name, primary: plan.Name !== subscription.Name}">
                                    <span ng-show="plan.Name === subscription.Name">{{ 'ALREADY_SUBSCRIBED' | translate }}</span>
                                    <span ng-show="plan.Name !== subscription.Name">{{ 'SUBSCRIBE_TO' | translate }} {{ plan.Name }}</span>
                                    <span ng-show="false">{{ 'UPDATE_PLAN' | translate }}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
