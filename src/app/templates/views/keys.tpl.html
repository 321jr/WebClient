<div id="pm_settings">
    <ng-include src="'templates/partials/menu.settings.tpl.html'"></ng-include>
    <div class="settings pm_form" pt-height>
        <p class="alert alert-info" ng-show="isSafari">Safari doesn't support downloading of keys. We are working on a fix for this.</p>
        <p class="alert alert-info">Download your PGP Keys for use with other PGP compatible services. Only incoming messages in inline OpenPGP format are currently supported.</p>
        <p>&nbsp;</p>
        <legend>{{ 'ACCOUNT' | translate }}</legend>

        <div ng-repeat="address in addresses" class="keyAddresses">
            <header>
                <span class="pm_badge pull-right success" ng-show="address.Status===1"><i class="fa fa-check"></i> Enabled</span>
                <span class="pm_badge pull-right" ng-show="address.Status!==1" pt-tooltip="{{ 'THIS_ADDRESS_IS_DISABLED' | translate }}">Disabled</span>
                <h4>{{ address.Email }}</h4>
            </header>
            <table class="pm_table thick bordered">
                <thead>
                    <tr>
                        <th>{{ 'FINGERPRINT' | translate }}</th>
                        <th class="text-right">{{ 'ACTIONS' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="key in address.Keys">
                        <td><code>{{ $index }}</code></td>
                        <td class="text-right">
                            <a class="pm_button" href="#" ng-click="download(key.PublicKey, 'public')" ng-disabled="isSafari">
                                <i class="fa fa-key"></i> {{ 'PUBLIC_KEY' | translate }}
                            </a>
                            <a class="pm_button" href="#" ng-click="download(key.PrivateKey, 'private')" ng-disabled="isSafari">
                                <i class="fa fa-key"></i> {{ 'PRIVATE_KEY' | translate }}
                            </a>
                            <button class="pm_button" ng-click="up(address, key)" ng-disabled="$index === 0">{{ 'UP' | translate }}</button>
                            <button class="pm_button" ng-click="down(address, key)" ng-disabled="$index === (address.Keys.length - 1)">{{ 'DOWN' | translate }}</button>
                            <button class="pm_button" ng-click="delete(address, key)" ng-disabled="address.Keys.length === 1">{{ 'DELETE' | translate }}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p class="text-right">
                <button class="pm_button" ng-click="generate(address)" ng-disabled="address.Keys > 10">
                    <i class="fa fa-plus"></i>
                    {{ 'GENERATE_NEW_KEY' | translate }}
                </button>
            </p>
            <p>&nbsp;</p>
        </div>

        <hr>

        <legend>{{ 'CUSTOM_DOMAINS' | translate }}</legend>

        <legend>{{ 'ADDRESSES' | translate }}</legend>

    </div>
</div>
